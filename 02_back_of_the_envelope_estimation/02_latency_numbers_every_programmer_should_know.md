## 모든 프로그래머가 알아야 하는 응답지연 값

- 2010년에 구글의 제프 딘이 공개한 컴퓨터 연산들의 응답지연 값과 2020년에 최근 기술 동향을 반영한 수치 비교

Latency Numbers (2010 vs 2020)

| 구분         | 연산 / 작업                                |                  2010 |                   2020 |
| ------------ | ------------------------------------------ | --------------------: | ---------------------: |
| CPU          | L1 캐시 참조                               |                 0.5ns |                    1ns |
| CPU          | 분기 예측 오류 (branch mispredict)         |                   5ns |                    3ns |
| CPU          | L2 캐시 참조                               |                   7ns |                    4ns |
| 동기화       | 뮤텍스(mutex) 락/언락                      |                 100ns |                   17ns |
| 메모리       | 주 메모리 참조                             |                 100ns |                  100ns |
| 압축         | Zippy로 1KB 압축                           |       10,000ns (10µs) |         2,000ns (≈2µs) |
| 네트워크     | 1Gbps 네트워크로 2KB 전송                  |       20,000ns (20µs) |                      - |
| 네트워크     | 일반 상용 네트워크에서 2KB 전송            |                     - |                   44ns |
| 메모리 I/O   | 메모리에서 1MB 순차적으로 read             |     250,000ns (250µs) |         3,000ns (≈3µs) |
| 네트워크     | 같은 데이터 센터 내 메시지 왕복 지연시간   |     500,000ns (500µs) |     500,000ns (≈500µs) |
| 디스크       | 디스크 탐색(seek)                          |   10,000,000ns (10ms) |     2,000,000ns (≈2ms) |
| 네트워크 I/O | 네트워크에서 1MB 순차적으로 read           |   10,000,000ns (10ms) |                      - |
| 디스크 I/O   | 디스크에서 1MB 순차적으로 read             |   30,000,000ns (30ms) |     825,000ns (≈825µs) |
| SSD I/O      | SSD상에서 임의 위치의 데이터 읽기          |                     - |       16,000ns (≈16µs) |
| SSD I/O      | SSD에서 1MB 바이트 순차적 읽기             |                     - |       49,000ns (≈49µs) |
| WAN          | CA(캘리포니아)↔네덜란드 패킷 왕복 지연시간 | 150,000,000ns (150ms) | 150,000,000ns (≈150ms) |

- 위 수치들을 분석한 결론
  - 메모리는 빠르지만 디스크는 아직도 느림
  - 디스크 탐색(seek)은 가능한 한 피하라
  - 단순한 압축 알고리즘은 빠르다.
  - 데이터를 인터넷으로 전송하기 전에 가능하면 압축하라
  - 데이터 센터는 보통 여러 지역(region)에 분산되어 있고, 센터들 간에 데이터를 주고받는 데는 시간이 걸린다.
