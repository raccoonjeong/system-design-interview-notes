## 캐시

값비싼 연산 결과 또는 자주 참조되는 페이지를 메모리 안에 두고, 뒤이은 요청이 보다 빨리 처리될 수 있도록 하는 저장소

애플리케이션의 성능은 DB를 얼마나 자주 호출하느냐에 크게 좌우됨. 이런 문제를 해결

### 캐시 계층(cache tier)

- 주도형 캐시 전략(read-through caching strategy)
  1.  데이터가 캐시에 있으면 캐시에서 데이터 읽음
  2.  데이터가 캐시에 없으면 데이터베이스에서 해당 데이터를 읽어 캐시에 씀
  3.  웹 서버에 데이터 반환

다양한 캐시 전략 참조 사이트
https://codeahoy.com/2017/08/11/caching-strategies-and-how-to-choose-the-right-one/

대부분의 캐시 서버들은 일반적으로 널리 쓰이는 랭귀지로 API 제공함

### 캐시 사용 시 유의할 점

- 어떤 상황에 써야?
  - 데이터 갱신은 자주 일어나지 않지만 참조는 빈번하게 일어날 때 고려해볼만 함
- 어떤 데이터를 두어야?
  - 캐시 서버가 재시작되면 캐시 내의 모든 데이터는 사라짐. 중요 데이터는 지속적 저장소에 두어야 함.
- 어떻게 만료되는가?
  - 만료에 대한 정책 마련이 바람직함... 너무 짧아도 너무 길어도 곤란
- 일관성은 어떻게 유지하는가?
  - 여기서 일관성은 데이터 저장소의 원본과 캐시 내의 사본이 같은지 여부. 저장소를 갱신하는 연산과 캐시를 갱신하는 연산은 단일 트랜잭션으로 처리되어야 한다.
- 장애에는 어떻게 대처?
  - 캐시 서버가 한 대만 있으면 단일 장애 지점(Single Point of Failure, SPOF, 특정 지점의 장애가 전체 시스템의 동작을 중단시켜버릴 수 있는 경우)가 되어버릴 수 있음. SPOF를 피하기 위해 캐시 서버는 여러 지역에 분산시켜야 함.
- 데이터 방출(eviction) 정책은?
  - 캐시가 꽉 찼을 때 기존 데이터를 내보내는 정책.
    - LRU(Least Recently Used): 마지막으로 사용된 시점이 가장 오래된 데이터를 내보내는 것(가장 널리 쓰임)
    - LFU(Least Frequently Used): 사용된 빈도가 가장 낮은 데이터를 내보내는 것
    - FIFO(First In First Out): 가장 먼저 캐시에 들어온 데이터를 가장 먼저 내보내는 것
